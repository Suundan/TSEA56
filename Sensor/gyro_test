/*
 * gyro_test.c
 *
 * Created: 2016-04-13 13:10:15
 * Author : Milton
 */ 

/*
 * tsea56_labb2-C.c
 *
 * Created: 2016-02-11 16:10:07
 * Author : Milton
 */ 

#include <avr/io.h>
#include <avr/interrupt.h>
#include <avr/delay.h>
uint8_t velocity_gyro = 0x00;
int main(void)
{
	DDRA = 0b00000000;	//Sets all A-pins as inputs
	ADMUX=0x60;			//Leftshift the output from the ad-converter (reads from ADCH) and sets A0 as input
	ADCSRA=0x83;		//Sets up the ad-converter to enable and prescale with 8
	DDRB = 0xff;		// Sets all B-pins to outputs 
	PORTB= 0x00;		// Initialize the B-port to ceros
	ADCSRA |= (1<<ADSC);// Start the conversasion
    while (ADCSRA |= (1<<ADSC)) // Does conversion in infinity-loop
    {
	velocity_gyro= ADCH - 0x2b; // The velocity is the output from the conversion minus the bias
	//PORTB = velocity_gyro;
	}
}
